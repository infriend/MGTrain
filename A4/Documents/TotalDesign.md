# Total Design

## 1. 逻辑视图

![logic view](./images/logicview2.jpg)
本项目的逻辑视图如上所示。本项目的入口是三个用户前端视图，包括普通用户的视图、
拍卖师的视图和管理员的视图，都是网页前端界面。各个前端视图控制后端的服务，
用户视图使用登录、参加拍卖，拍卖申请的服务，拍卖师视图使用登录、管理拍卖的服务，
管理员使用登录、管理账号的服务。所有的服务均使用数据持久服务，也就是说，
所有服务产生的数据均会保存在MySQL数据库中。

## 2. 开发视图

![implement view](./images/implementview.jpg)
本项目的开发视图如上所示。网络处理包包含的API等是项目的入口，包括了Spring服务中
Http处理相关机制、异常处理，以及对数据有效性进行校验，还有统一的数据返回包装，
保证了数据返回格式的统一，方便调用。经过Spring处理过的请求会映射到相应的Controller中，
控制器包实现了对所有的服务的调用和控制，不同的用户请求对应着不同角色功能的控制器。
系统的几大功能分别对应着相应的功能包。公共服务包处理对所有用户开放的服务，
包括查看正在进行的拍卖列表和相关详细信息。拍卖师服务包包括了所有拍卖管理的服务，
包括查看待拍卖物品列表、新建/拒绝拍卖、暂停/恢复拍卖、修改拍卖信息和结束拍卖等。
买受人服务包包括了普通用户的参与拍卖功能，处理用户的报名、报价、付尾款和历史参与列表。
委托人服务包则处理普通用户的拍卖申请功能，可以上传拍卖申请的相关信息和撤回。
管理员服务包处理了账号管理功能，是管理员功能的集合，处理了密码重置、账户删除、
审核拍卖师的功能。所有的服务包包括数据存储处理的需求，因此有存储服务包，
处理与数据库相关的功能，包括了操作MySQL的所有文件和方法。
所有的服务包都需要操作对象，在服务中内存中进行数据计算，因此有对象实体包，
包括了普通的数据对象、前后端交互用的展示对象和数据处理的业务对象。

## 3. 进程视图

![process view](./images/processview.jpg)
本项目的进程视图如上所示。本系统的各个功能间不存在耦合冲突、互相调用，
功能间不存在必须先后使用的关系。所有的服务包本质都是包装了数据库的增删改查操作，
因此项目的进程关系仅存在于Spring的请求处理中。本系统的所有服务的通用使用流程分析如上图。
用户首先操作前端，发送请求到Spring后端。后端使用DispatcherServlet管理请求处理流程，
先请求HandlerMapping查找执行器，再请求HandlerAdaptor调用相关的控制器，
控制器再去调用相应的几个服务获得结果，该结果经过ViewSolver处理渲染，变成View返回给用户。

![deployment view](./images/deploymentview.jpg)
本项目的部署视图如上所示。由于是一个原型，仅需向甲方展示即可，暂时不用考虑商业部署问题，
因此系统部署在开发用的服务器中即可。在开发机器中部署系统后端，在客户机器中发布系统前端，
即可实现系统的前后端交互。MySQL本身可以部署在别的服务器中，也可以部署在开发机上，
因此数据库服务器聚合在开发机上。
